# shellcheck shell=sh disable=SC1072,SC3043 #source

test_file_rm(){
    x hub file rm -r script
    @assert "$(x hub file ls script)" = ""
}

test_file_upload(){
    @assert stdout "
    x hub file upload $(x wsroot)/.x-cmd/script/demo.js script/demo.js
    x hub file upload $(x wsroot)/.x-cmd/script/demo.py script/demo.py
    cd $(x wsroot) && x hub file upload_dist . script/demo.wx
    " <<A
UPLOAD=SUCCESS
UPLOAD=SUCCESS
UPLOAD=SUCCESS
A
}

test_file_ls(){
    @assert stdout "x hub file ls script" <<A
demo.js
demo.py
demo.wx
A
}

test_file_la(){
    @assert stdout "x hub file la script" <<A
[{"path":"script/demo.js","isPublic":false},{"path":"script/demo.py","isPublic":false},{"path":"script/hub.wx","isPublic":false},{"path":"script/demo.wx","isPublic":false}]
A
}

test_file_which(){
    @assert stdout x hub file which script/demo.js <<A
$___X_CMD_ROOT_MOD/.hub/.cache/@me/script/demo.js
A

    @assert stdout '
    x py @me/script/demo.py
    x js @me/script/demo.js
    x wx @me/script/demo.wx
' <<A
Hello Python !!!
Hello Node !!!
Hello Hub by wx !!!
A
}

test_file_share(){
    @assert false x hub file share script
    @assert true x hub file share script/demo.js
    @assert stdout "x hub file la script" <<A
[{"path":"script/demo.js","isPublic":true},{"path":"script/demo.py","isPublic":false},{"path":"script/hub.wx","isPublic":false},{"path":"script/demo.wx","isPublic":false}]
A
}

test_file_private(){
    @assert true x hub file private script/demo.js
    @assert stdout "x hub file la script" <<A
[{"path":"script/demo.js","isPublic":false},{"path":"script/demo.py","isPublic":false},{"path":"script/hub.wx","isPublic":false},{"path":"script/demo.wx","isPublic":false}]
A
}

@assert:file:func